# Telegram-бот Nuna

В этом репозитории находится исходный код Telegram-бота **Nuna** — AI‑ассистента
для родителей малышей и детей раннего возраста (0–3 года). Бот хранит данные в
Google Sheets и требует нескольких внешних API‑ключей.

### Основные шаги

1. **Задайте переменные окружения**:
   - `TELEGRAM_TOKEN` – токен бота, полученный у BotFather
   - `OPENROUTER_API_KEY` – ключ к API OpenRouter или аналогичного сервиса LLM
   - `ROBOKASSA_LOGIN`, `ROBOKASSA_PASSWORD1`, `ROBOKASSA_PASSWORD2` – данные
     платежного провайдера
   - `GOOGLE_CREDENTIALS_FILE` – путь к JSON‑файлу сервисного аккаунта (он
     игнорируется в `.gitignore`)
   - `SPREADSHEET_NAME` – название таблицы Google Sheets, используемой ботом

2. **Установите зависимости**:
   ```sh
   pip install -r requirements.txt
   ```
   (при необходимости сформируйте `requirements.txt` командой
   `pip freeze > requirements.txt`.)

3. **Запустите бота**, например через Flask:
   ```sh
   python main.py
   ```

## Замечания по безопасности

- Никогда не храните токены, пароли или ключи в виде открытого текста.
- Не сохраняйте чувствительные данные в системе контроля версий. Используйте
  переменные окружения или «хранилище секретов».
- Файл `.gitignore` уже исключает распространённые приватные файлы и Python
  артефакты.

## Использование

Этот бот общается с пользователями через Telegram. После запуска он
ожидает входящих сообщений и обрабатывает их с помощью встроенного ИИ.

### Основные команды

- `/start` — приветствие и базовая инструкция по использованию. Обычно бот
  предлагает выбрать одну из кнопок меню или задать свой вопрос.
- `/help` — краткое описание доступных команд и что бот умеет.
- `/admin` — (только для администраторов) переход в административный режим,
  где можно просматривать обращения, расчёт баланса токенов и т.д.
- `/logout` — завершение административной сессии.

### Как задавать вопросы

Пользователь просто отправляет текстовое сообщение с запросом (на русском
языке). Бот пытается классифицировать его и отвечает в соответствии со
системным промптом, описанным в `main.py`.

### Кнопочное меню

При общении бот предлагает кнопки:

- «Как это работает?» — краткая информация о работе сервиса.
- «Чат» — начало обычного диалога с ИИ.
- «Почему мне можно доверять?» — пояснение о целях и ограничениях бота.
- «◀️ Назад» — возвращение к предыдущему меню.

### Другие функции

- Система рейтинга обратной связи и хранение истории в Google Sheets.
- Управление балансом токенов и подписками через Google Sheets.
- Авторизация администраторов для расширенного контроля.

Эти инструкции помогут новым пользователям и разработчикам быстро освоиться
с работой приложения.

---
